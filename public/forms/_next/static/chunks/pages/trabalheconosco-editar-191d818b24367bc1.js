(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{7788:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trabalheconosco-editar",function(){return s(8551)}])},8551:function(e,a,s){"use strict";s.r(a);var o=s(5893),n=s(9008),t=s(6134),i=s.n(t),r=s(7509),c=s(7294),l=s(8193),d=s(1163),u=s(743),p=s(8992),_=s(6876),C=s(5353),m=s(2167),N=s(9886),O=s(7837);function E(e,a,s){return a in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s,e}function A(e){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{},o=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),o.forEach((function(a){E(e,a,s[a])}))}return e}var h=function(e,a){switch(a.type){case"personal":return A({},e,{CO_SEQ_CANDIDATO:a.payload});case"tecnologias":return A({},e,{tecnologias:a.payload});case"academic":return A({},e,{academic:a.payload});case"Dados Complementares":case"Dados Pessoais":case"L\xednguas":return A({},e,a.payload);case"professional":return A({},e,{professional:a.payload});default:return A({},e,a.payload)}},f=function(e){return e.split("-").reverse().join("/")},S=new Headers;S.append("Content-Type","multipart/form-data; application/json");a.default=function(){var e=(0,d.useRouter)(),a=(0,c.useState)(!1),s=a[0],t=a[1],E=(0,c.useReducer)(h,{}),I=E[0],D=E[1],T=(0,c.useState)(),b=T[0],v=T[1],g=(0,c.useState)(),x=g[0],j=g[1],P=(0,c.useState)(),y=P[0],L=P[1],R=(0,c.useState)(),F=R[0],U=R[1],M=(0,c.useState)(),Q=M[0],k=M[1],H=(0,c.useState)(!1),w=H[0],V=H[1],G=(0,c.useState)(!1),Z=G[0],X=G[1],q=(0,c.useState)(!0),J=q[0],z=q[1],B=(0,c.useState)(!0),K=B[0],W=B[1],Y=(0,c.useState)("Dados Pessoais"),$=Y[0],ee=Y[1],ae=(0,c.useState)("Dados Pessoais"),se=ae[0],oe=ae[1],ne=(0,c.useState)(!1),te=ne[0],ie=ne[1],re=(0,c.useState)({dadosPessoais:{},dadosComplementares:{},cartaApresentacao:{}}),ce=re[0],le=re[1];(0,c.useEffect)((function(){"Carta de apresenta\xe7\xe3o"===$&&Z&&Ce()}),[I,$,Z]),(0,c.useEffect)((function(){de()}),[]);var de=function(){W(!0);var a=localStorage.getItem("token-tc");fetch("https://escolacanarinho.com.br/canarinhoapi/routes/trabalheConosco/search.php",{method:"POST",body:JSON.stringify({acesso:a})}).then((function(e){return e.json()})).then((function(e){if(e.lingua.length>0){var a={CO_SEQ__CANDIDATO_LINGUANIVELCONHECIMENTO:e.lingua[0].CO_SEQ__CANDIDATO_LINGUANIVELCONHECIMENTO,ingles:e.lingua[0].CO_SEQ_NIVEL_CONHECIMENTO};L(a)}k(e.pessoais.CO_SEQ_CANDIDATO);var s={CO_SEQ_CANDIDATO:e.pessoais.CO_SEQ_CANDIDATO,estado:e.pessoais.CO_SEQ_UF,municipio:e.pessoais.CO_SEQ_MUNICIPIO,email:e.pessoais.DS_EMAIL,endereco_residencial:e.pessoais.DS_ENDERECO_RESIDENCIAL,idade_filhos:e.pessoais.DS_FILHO,sexo:e.pessoais.TP_SEXO,rg:e.pessoais.NU_RG,cpf:e.pessoais.NU_CPF_CANDIDATO,nome:e.pessoais.NO_CANDIDATO,data_nascimento:f(e.pessoais.DT_NASCIMENTO),t_celular:e.pessoais.NU_TELEFONE_CELULAR,t_comercial:e.pessoais.NU_TELEFONE_COMERCIAL,t_residencial:e.pessoais.NU_TELEFONE_RESIDENCIAL,estado_civil:e.pessoais.ST_ESTADO_CIVIL,imagem:e.pessoais.foto,cep:e.pessoais.NU_CEP_RESIDENCIAL,quantos_filhos:e.pessoais.NU_FILHO,naturalidade:e.pessoais.NU_FILHO,filhos:parseInt(e.pessoais.NU_FILHO)>0?"S":"N"},o={problema_justica:e.pessoais.ST_JUSTICA,p_just_desc:e.pessoais.DS_JUSTICA||"",problema_saude:e.pessoais.ST_SAUDE,p_saude_desc:e.pessoais.DS_SAUDE||"",trabalha:e.pessoais.ST_TRABALHA},n={cargo_pretendido:e.apresentacao.CO_CARGO,experiencia_crianca:e.apresentacao.TP_EXPERIENCIA_CRIANCA,ec_outro:e.apresentacao.DS_APRESENTACAO,horario_pretendido:e.apresentacao.CO_TURNO,localidade_preferencia:e.apresentacao.CO_ESCOLA,sabendo_vaga:e.apresentacao.DS_CONHECIMENTO_VAGA,indicado:e.apresentacao.TP_INDICACAO,indicado_outro:e.apresentacao.DS_INDICACAO_VAGA,porque_trabalhar_aqui:e.apresentacao.DS_PORQUE_TRABALHAR,carta_apresentacao:e.apresentacao.DS_APRESENTACAO};j(o),v(s),U(n);var t=e.academic.map((function(e){return{CO_SEQ_FORMACAO_ACADEMICA:e.CO_SEQ_FORMACAO_ACADEMICA,formacao:e.TP_FORMACAO,instituicao:e.NO_UNIDADE_ENSINO,curso:e.NO_CURSO,estado:e.DS_SIGLA,municipio:e.NO_MUNICIPIO,periodo_inicio:f(e.DT_INICIO),periodo_fim:f(e.DT_FIM),carga_horaria:e.NU_CARGA_HORARIA}})),i=e.tecnologia.map((function(e){return{CO_SEQ_CANDIDATO_TECNOLOGIANIVELCONHECIMENTO:e.CO_SEQ_CANDIDATO_TECNOLOGIANIVELCONHECIMENTO,tecno:e.DS_TECNOLOGIA,nivel:e.DS_NIVEL_CONHECIMENTO}})),r=e.experiencia.map((function(e){return{CO_SEQ_EXPERIENCIAPROFISSIONAL:e.CO_SEQ_EXPERIENCIAPROFISSIONAL,empresa:e.DS_EMPRESA,cargo:e.DS_CARGO,periodo_inicio:f(e.DT_INICIO),periodo_fim:f(e.DT_FIM),atribuicoes:e.DS_ATRIBUICOES,referencia:e.NO_REFERENCIA,referencia_telefone:e.NU_TELEFONE_REFERENCIA}}));D({type:"professional",payload:r}),D({type:"tecnologias",payload:i}),D({type:"academic",payload:t})})).catch((function(a){W(!1),t(!0),localStorage.removeItem("token-tc"),setTimeout((function(){e.push("/trabalheconosco.html")}),5e3)})).finally((function(){W(!1)}))},ue=function(e,a){a===se&&D({type:a,payload:e})},pe=function(e,a){D({type:a,payload:e})},_e=function(e){var a={},s=!0,o=I;for(var n in e){var t,i,r=o[n],c=e[n];if((null===c||void 0===c||null===(t=c.required)||void 0===t?void 0:t.value)&&!r)s=!1,a[n]=null===c||void 0===c||null===(i=c.required)||void 0===i?void 0:i.message;var l=null===c||void 0===c?void 0:c.pattern;(null===l||void 0===l?void 0:l.value)&&!RegExp(l.value).test(r)&&(s=!1,a[n]=l.message);var d=null===c||void 0===c?void 0:c.custom;(null===d||void 0===d?void 0:d.isValid)&&!d.isValid(r)&&(s=!1,a[n]=d.message)}return a.valid=s,a},Ce=function(){var e=!0,a={};if(r.Lt)for(var s in a.dadosPessoais=_e(r.Lt.dadosPessoais),a.cartaApresentacao=_e(r.Lt.cartaApresentacao),a){a[s].valid||(e=!1)}e?(le({dadosPessoais:{},dadosComplementares:{},cartaApresentacao:{}}),me()):le(a)},me=function(){if(I.academic&&0!==I.academic.length){var a=I;a.ingles||(a.ingles=4),V(!0),fetch("https://escolacanarinho.com.br/canarinhoapi/routes/trabalheConosco/index.php",{headers:S,method:"POST",body:JSON.stringify(A({update:0},I))}).then((function(e){return e.json()})).then((function(a){"Dados atualizados com sucesso"===a&&(z(!1),setTimeout((function(){e.push("/trabalheconosco.html")}),3e3))})).catch((function(e){ie(!0),setTimeout((function(){V(!1),ie(!1)}),3e3)}))}else alert("Voc\xea deve ter pelo menos uma forma\xe7\xe3o acad\xeamica")},Ne=function(e){oe($),ee(e)};return(0,o.jsxs)("div",{className:i().container,children:[(0,o.jsxs)(n.default,{children:[(0,o.jsx)("title",{children:"Trabalhe Conosco - Cadastro"}),(0,o.jsx)("meta",{name:"description",content:"Canarinho - Trabalhe conosco"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsx)(O.Z,{isOpen:w,children:(0,o.jsx)("div",{className:"message-container",children:J?(0,o.jsx)("img",{src:"loading.gif",alt:"loading",height:80}):!J&&te?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.SV5,{color:"#e46060"}),(0,o.jsx)("h2",{className:i().error,children:"Ocorreu um error, tente novamente mais tarde."})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.KP3,{}),(0,o.jsx)("h2",{children:"Atualiza\xe7\xe3o realizada com sucesso, redirecionando..."})]})})}),(0,o.jsxs)("main",{className:i().maintrabalhe,children:[K&&(0,o.jsx)("div",{className:"loading-container",children:(0,o.jsx)("img",{src:"loading.gif",alt:"Processing",height:80,width:80})}),!K&&s&&(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:"error-message-input bigger",children:"Token inv\xe1lido, redirecionando para o login..."})}),!K&&!s&&(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:i().mainWider,children:[(0,o.jsxs)("div",{className:"tab",children:[(0,o.jsx)("button",{type:"button",className:"Dados Pessoais"===$?"tab-active":"",style:{color:Object.keys(ce.dadosPessoais).length>0?"red":""},onClick:function(){return Ne("Dados Pessoais")},children:"Dados Pessoais"}),(0,o.jsx)("button",{type:"button",className:"Dados Complementares"===$?"tab-active":"",onClick:function(){return Ne("Dados Complementares")},children:"Dados Complementares"}),(0,o.jsx)("button",{type:"button",className:"Forma\xe7\xe3o Acad\xeamica"===$?"tab-active":"",onClick:function(){return Ne("Forma\xe7\xe3o Acad\xeamica")},children:"Forma\xe7\xe3o Acad\xeamica"}),(0,o.jsx)("button",{type:"button",className:"L\xednguas"===$?"tab-active":"",onClick:function(){return Ne("L\xednguas")},children:"L\xednguas"}),(0,o.jsx)("button",{type:"button",className:"Experi\xeancia Profissional"===$?"tab-active":"",onClick:function(){return Ne("Experi\xeancia Profissional")},children:"Experi\xeancia Profissional"}),(0,o.jsx)("button",{type:"button",className:"Carta de apresenta\xe7\xe3o"===$?"tab-active":"",style:{color:ce.cartaApresentacao==={}?"red":""},onClick:function(){return Ne("Carta de apresenta\xe7\xe3o")},children:"Carta de apresenta\xe7\xe3o"})]}),(0,o.jsxs)("div",{className:"position-component",children:[(0,o.jsx)("h1",{children:"Trabalhe Conosco"}),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",{children:[(0,o.jsx)(u.Z,{handleSent:function(e){D({type:"personal",payload:e}),ee("Dados Complementares")},TabName:"Dados Pessoais",selectedTab:$,handleNextTab:Ne,handleSubmit:ue,initData:b,errs:ce.dadosPessoais}),(0,o.jsx)(p.Z,{handleSubmit:ue,TabName:"Dados Complementares",selectedTab:$,handleNextTab:Ne,initData:A({CO_SEQ_CANDIDATO:Q},x,{tecnologias:I.tecnologias}),errors:ce.dadosComplementares}),(0,o.jsx)(_.Z,{handleSubmit:pe,TabName:"Forma\xe7\xe3o Acad\xeamica",selectedTab:$,initData:{CO_SEQ_CANDIDATO:Q,academic:I.academic},handleNextTab:Ne}),(0,o.jsx)(C.Z,{handleSubmit:ue,TabName:"L\xednguas",initData:y,selectedTab:$,handleNextTab:Ne}),(0,o.jsx)(m.Z,{handleSubmit:pe,TabName:"Experi\xeancia Profissional",selectedTab:$,handleNextTab:Ne,initData:{CO_SEQ_CANDIDATO:Q,professional:I.professional}}),(0,o.jsx)(N.Z,{handleSubmit:function(e,a,s){s&&X(s),D({type:a,payload:e})},TabName:"Carta de apresenta\xe7\xe3o",selectedTab:$,handlePrevTab:Ne,initData:F,errors:ce.cartaApresentacao})]})]})]})})]})]})}}},function(e){e.O(0,[13,617,937,567,434,460,774,888,179],(function(){return a=7788,e(e.s=a);var a}));var a=e.O();_N_E=a}]);